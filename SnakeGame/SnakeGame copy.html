<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Classic Snake Game - Play the retro arcade game in your browser"
    />
    <title>Snake Game - Classic Arcade</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        overflow: hidden;
      }

      .game-container {
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      h1 {
        font-size: 2.5em;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        background: linear-gradient(45deg, #ff6b6b, #ffd93d);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        font-size: 1.2em;
        font-weight: bold;
      }

      .score,
      .high-score,
      .level {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 15px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      #gameCanvas {
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        background: #000;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        display: block;
        margin: 0 auto;
      }

      .game-screen {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 10;
        /* Fixed dimensions to match canvas */
        width: 400px;
        height: 400px;
      }

      .game-screen.active {
        display: block;
      }

      .start-screen,
      .game-over-screen {
        background: rgba(0, 0, 0, 0.95);
        /* Use full dimensions of parent */
        width: 100%;
        height: 100%;
        border-radius: 15px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        /* Center content vertically and horizontally */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
      }

      .start-screen h2,
      .game-over-screen h2 {
        margin-bottom: 15px;
        font-size: 1.8em;
        color: #ffd93d;
      }

      .start-screen p,
      .game-over-screen p {
        margin-bottom: 15px;
        font-size: 1em;
        opacity: 0.9;
      }

      .btn {
        background: linear-gradient(45deg, #ff6b6b, #ffd93d);
        border: none;
        padding: 12px 24px;
        font-size: 1em;
        font-weight: bold;
        color: white;
        border-radius: 25px;
        cursor: pointer;
        margin: 8px;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .btn:active {
        transform: translateY(0);
      }

      .controls {
        margin-top: 15px;
        font-size: 0.8em;
        opacity: 0.8;
      }

      .controls p {
        margin: 3px 0;
      }

      .difficulty-selector {
        margin-top: 15px;
        text-align: center;
      }

      .difficulty-selector h3 {
        margin-bottom: 10px;
        font-size: 1.2rem;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
      }

      .difficulty-options {
        display: flex;
        justify-content: center;
        gap: 10px;
      }

      .radio-option {
        position: relative;
        cursor: pointer;
        font-weight: bold;
      }

      .radio-option input[type="radio"] {
        display: none;
      }

      .radio-option span {
        display: inline-block;
        padding: 8px 15px;
        border-radius: 6px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      .radio-option input[type="radio"]:checked + span {
        background: linear-gradient(45deg, #ff4b2b, #ff416c);
        color: #fff;
        border: none;
        box-shadow: 0 0 10px #ff416c;
      }

      .radio-option span:hover {
        transform: translateY(-2px);
      }

      .mobile-controls {
        display: none;
        margin-top: 20px;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        max-width: 200px;
        margin-left: auto;
        margin-right: auto;
      }

      .mobile-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 15px;
        border-radius: 10px;
        font-size: 1.2em;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .mobile-btn:hover,
      .mobile-btn:active {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0.95);
      }

      .mobile-btn:nth-child(1) {
        grid-column: 2;
      }
      .mobile-btn:nth-child(2) {
        grid-column: 1;
        grid-row: 2;
      }
      .mobile-btn:nth-child(3) {
        grid-column: 2;
        grid-row: 2;
      }
      .mobile-btn:nth-child(4) {
        grid-column: 3;
        grid-row: 2;
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 20px;
          margin: 20px;
        }

        h1 {
          font-size: 2em;
        }

        #gameCanvas {
          width: 100%;
          max-width: 400px;
          height: auto;
        }

        .game-screen {
          width: 90vw;
          max-width: 400px;
          height: 90vw;
          max-height: 400px;
        }

        .mobile-controls {
          display: grid;
        }

        .game-info {
          flex-direction: column;
          gap: 10px;
        }
      }

      .pause-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 5;
        border-radius: 15px;
      }

      .pause-overlay.active {
        display: flex;
      }

      .pause-text {
        font-size: 2em;
        font-weight: bold;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>üêç Snake Game</h1>

      <div class="game-info">
        <div class="score">Score: <span id="currentScore">0</span></div>
        <div class="high-score">High Score: <span id="highScore">0</span></div>
        <div class="level">Level: <span id="currentLevel">1</span></div>
      </div>

      <div style="position: relative">
        <canvas id="gameCanvas" width="400" height="400"></canvas>

        <div class="pause-overlay" id="pauseOverlay">
          <div class="pause-text">PAUSED</div>
        </div>

        <div class="game-screen active" id="startScreen">
          <div class="start-screen">
            <h2>üêç Welcome to Snake Game!</h2>
            <p>Eat the food to grow longer and score points</p>

            <div class="difficulty-selector">
              <h3>Select Difficulty:</h3>
              <div class="difficulty-options">
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="easy" checked />
                  <span>Easy (Slow)</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="medium" />
                  <span>Medium (Normal)</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="hard" />
                  <span>Hard (Fast)</span>
                </label>
              </div>
            </div>

            <button class="btn" onclick="startGame()">Start Game</button>

            <div class="controls">
              <p><strong>Controls:</strong></p>
              <p>Arrow Keys or WASD to move</p>
              <p>SPACE to pause</p>
              <p>On mobile: Use touch controls below</p>
            </div>
          </div>
        </div>

        <div class="game-screen" id="gameOverScreen">
          <div class="game-over-screen">
            <h2>üéÆ Game Over!</h2>
            <p id="finalScore">Your Score: 0</p>
            <p id="newHighScore" style="display: none">üèÜ New High Score!</p>
            <button class="btn" onclick="restartGame()">Play Again</button>
            <button class="btn" onclick="showStartScreen()">Main Menu</button>
          </div>
        </div>
      </div>

      <div class="mobile-controls" id="mobileControls">
        <button class="mobile-btn" onclick="changeDirection('up')">‚Üë</button>
        <button class="mobile-btn" onclick="changeDirection('left')">‚Üê</button>
        <button class="mobile-btn" onclick="changeDirection('down')">‚Üì</button>
        <button class="mobile-btn" onclick="changeDirection('right')">‚Üí</button>
      </div>
    </div>

    <script>
      // Game state
      let game = {
        canvas: null,
        ctx: null,
        snake: [],
        food: {},
        direction: "right",
        nextDirection: "right",
        score: 0,
        highScore: 0,
        level: 1,
        gameRunning: false,
        gamePaused: false,
        gridSize: 20,
        gameSpeed: 150,
      };

      // Game settings
      const DIFFICULTY_SPEEDS = {
        easy: 200,
        medium: 150,
        hard: 100,
      };

      // Initialize game
      function initGame() {
        game.canvas = document.getElementById("gameCanvas");
        game.ctx = game.canvas.getContext("2d");

        // Load high score from localStorage
        game.highScore = parseInt(
          localStorage.getItem("snakeHighScore") || "0"
        );
        updateHighScoreDisplay();

        // Set up event listeners
        setupEventListeners();

        // Initialize game objects
        resetGame();
      }

      function setupEventListeners() {
        // Keyboard controls
        document.addEventListener("keydown", handleKeyPress);

        // Prevent scrolling with arrow keys
        window.addEventListener("keydown", function (e) {
          if (
            ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight", " "].includes(
              e.key
            )
          ) {
            e.preventDefault();
          }
        });
      }

      function handleKeyPress(event) {
        if (!game.gameRunning) return;

        switch (event.key) {
          case " ":
            togglePause();
            break;
          case "ArrowUp":
          case "w":
          case "W":
            changeDirection("up");
            break;
          case "ArrowDown":
          case "s":
          case "S":
            changeDirection("down");
            break;
          case "ArrowLeft":
          case "a":
          case "A":
            changeDirection("left");
            break;
          case "ArrowRight":
          case "d":
          case "D":
            changeDirection("right");
            break;
        }
      }

      function changeDirection(newDirection) {
        if (game.gamePaused || !game.gameRunning) return;

        // Prevent reverse direction
        const opposites = {
          up: "down",
          down: "up",
          left: "right",
          right: "left",
        };

        if (opposites[newDirection] !== game.direction) {
          game.nextDirection = newDirection;
        }
      }

      function resetGame() {
        // Initialize snake in center
        const centerX =
          Math.floor(game.canvas.width / game.gridSize / 2) * game.gridSize;
        const centerY =
          Math.floor(game.canvas.height / game.gridSize / 2) * game.gridSize;

        game.snake = [
          { x: centerX, y: centerY },
          { x: centerX - game.gridSize, y: centerY },
          { x: centerX - game.gridSize * 2, y: centerY },
        ];

        game.direction = "right";
        game.nextDirection = "right";
        game.score = 0;
        game.level = 1;
        game.gamePaused = false;

        updateScore();
        generateFood();
      }

      function generateFood() {
        const maxX = Math.floor(game.canvas.width / game.gridSize) - 1;
        const maxY = Math.floor(game.canvas.height / game.gridSize) - 1;

        let foodX, foodY;
        let attempts = 0;

        // Ensure food doesn't spawn on snake
        do {
          foodX = Math.floor(Math.random() * maxX) * game.gridSize;
          foodY = Math.floor(Math.random() * maxY) * game.gridSize;
          attempts++;
        } while (isSnakeCollision(foodX, foodY) && attempts < 100);

        game.food = { x: foodX, y: foodY };
      }

      function isSnakeCollision(x, y) {
        return game.snake.some((segment) => segment.x === x && segment.y === y);
      }

      function startGame() {
        const difficulty = document.querySelector(
          'input[name="difficulty"]:checked'
        ).value;
        game.gameSpeed = DIFFICULTY_SPEEDS[difficulty];

        hideAllScreens();
        game.gameRunning = true;
        gameLoop();
      }

      function gameLoop() {
        if (!game.gameRunning) return;

        if (!game.gamePaused) {
          updateGame();
          renderGame();
        }

        setTimeout(() => gameLoop(), game.gameSpeed);
      }

      function updateGame() {
        // Update direction
        game.direction = game.nextDirection;

        // Move snake
        const head = { ...game.snake[0] };

        switch (game.direction) {
          case "up":
            head.y -= game.gridSize;
            break;
          case "down":
            head.y += game.gridSize;
            break;
          case "left":
            head.x -= game.gridSize;
            break;
          case "right":
            head.x += game.gridSize;
            break;
        }

        if (head.x < 0) {
          head.x = game.canvas.width - game.gridSize;
        } else if (head.x >= game.canvas.width) {
          head.x = 0;
        }

        if (head.y < 0) {
          head.y = game.canvas.height - game.gridSize;
        } else if (head.y >= game.canvas.height) {
          head.y = 0;
        }

        // Check self collision
        if (isSnakeCollision(head.x, head.y)) {
          gameOver();
          return;
        }

        game.snake.unshift(head);

        // Check food collision
        if (head.x === game.food.x && head.y === game.food.y) {
          game.score += 10;
          game.level = Math.floor(game.score / 100) + 1;
          updateScore();
          generateFood();
          const eatSound = new Audio("assets/sounds/eat.mp3");
          // After eating food
          eatSound.play();

          // Increase speed slightly with level
          game.gameSpeed = Math.max(50, game.gameSpeed - 2);
        } else {
          game.snake.pop();
        }
      }

      function renderGame() {
        // Clear canvas
        game.ctx.fillStyle = "#000";
        game.ctx.fillRect(0, 0, game.canvas.width, game.canvas.height);

        // Draw grid (subtle)
        game.ctx.strokeStyle = "#111";
        game.ctx.lineWidth = 1;

        for (let x = 0; x <= game.canvas.width; x += game.gridSize) {
          game.ctx.beginPath();
          game.ctx.moveTo(x, 0);
          game.ctx.lineTo(x, game.canvas.height);
          game.ctx.stroke();
        }

        for (let y = 0; y <= game.canvas.height; y += game.gridSize) {
          game.ctx.beginPath();
          game.ctx.moveTo(0, y);
          game.ctx.lineTo(game.canvas.width, y);
          game.ctx.stroke();
        }

        // Draw snake
        game.snake.forEach((segment, index) => {
          if (index === 0) {
            // Snake head
            game.ctx.fillStyle = "#4ade80";
            game.ctx.fillRect(
              segment.x + 1,
              segment.y + 1,
              game.gridSize - 2,
              game.gridSize - 2
            );

            // Eyes
            game.ctx.fillStyle = "#fff";
            const eyeSize = 3;
            const eyeOffset = 6;

            if (game.direction === "right") {
              game.ctx.fillRect(
                segment.x + eyeOffset + 6,
                segment.y + 4,
                eyeSize,
                eyeSize
              );
              game.ctx.fillRect(
                segment.x + eyeOffset + 6,
                segment.y + 12,
                eyeSize,
                eyeSize
              );
            } else if (game.direction === "left") {
              game.ctx.fillRect(segment.x + 4, segment.y + 4, eyeSize, eyeSize);
              game.ctx.fillRect(
                segment.x + 4,
                segment.y + 12,
                eyeSize,
                eyeSize
              );
            } else if (game.direction === "up") {
              game.ctx.fillRect(segment.x + 4, segment.y + 4, eyeSize, eyeSize);
              game.ctx.fillRect(
                segment.x + 12,
                segment.y + 4,
                eyeSize,
                eyeSize
              );
            } else {
              game.ctx.fillRect(
                segment.x + 4,
                segment.y + 12,
                eyeSize,
                eyeSize
              );
              game.ctx.fillRect(
                segment.x + 12,
                segment.y + 12,
                eyeSize,
                eyeSize
              );
            }
          } else {
            // Snake body
            const gradient = game.ctx.createLinearGradient(
              segment.x,
              segment.y,
              segment.x + game.gridSize,
              segment.y + game.gridSize
            );
            gradient.addColorStop(0, "#22c55e");
            gradient.addColorStop(1, "#16a34a");

            game.ctx.fillStyle = gradient;
            game.ctx.fillRect(
              segment.x + 2,
              segment.y + 2,
              game.gridSize - 4,
              game.gridSize - 4
            );
          }
        });

        // Draw food
        const gradient = game.ctx.createRadialGradient(
          game.food.x + game.gridSize / 2,
          game.food.y + game.gridSize / 2,
          0,
          game.food.x + game.gridSize / 2,
          game.food.y + game.gridSize / 2,
          game.gridSize / 2
        );
        gradient.addColorStop(0, "#fbbf24");
        gradient.addColorStop(1, "#f59e0b");

        game.ctx.fillStyle = gradient;
        game.ctx.beginPath();
        game.ctx.arc(
          game.food.x + game.gridSize / 2,
          game.food.y + game.gridSize / 2,
          game.gridSize / 2 - 2,
          0,
          Math.PI * 2
        );
        game.ctx.fill();
      }

      function updateScore() {
        document.getElementById("currentScore").textContent = game.score;
        document.getElementById("currentLevel").textContent = game.level;
      }

      function updateHighScoreDisplay() {
        document.getElementById("highScore").textContent = game.highScore;
      }

      function gameOver() {
        game.gameRunning = false;
        const gameOverSound = new Audio("assets/sounds/game-over.mp3");
        // On game over
        gameOverSound.play();

        // Update high score
        if (game.score > game.highScore) {
          game.highScore = game.score;
          localStorage.setItem("snakeHighScore", game.highScore.toString());
          updateHighScoreDisplay();
          document.getElementById("newHighScore").style.display = "block";
        } else {
          document.getElementById("newHighScore").style.display = "none";
        }

        document.getElementById(
          "finalScore"
        ).textContent = `Your Score: ${game.score}`;
        document.getElementById("gameOverScreen").classList.add("active");
      }

      function restartGame() {
        hideAllScreens();
        resetGame();
        game.gameRunning = true;
        gameLoop();
      }

      function showStartScreen() {
        hideAllScreens();
        document.getElementById("startScreen").classList.add("active");
      }

      function hideAllScreens() {
        document.querySelectorAll(".game-screen").forEach((screen) => {
          screen.classList.remove("active");
        });
        document.getElementById("pauseOverlay").classList.remove("active");
      }

      function togglePause() {
        if (!game.gameRunning) return;

        game.gamePaused = !game.gamePaused;

        if (game.gamePaused) {
          document.getElementById("pauseOverlay").classList.add("active");
        } else {
          document.getElementById("pauseOverlay").classList.remove("active");
        }
      }

      game.score += 10 * game.level;
      game.obstacles = [
        { x: 100, y: 100 },
        { x: 200, y: 300 },
      ];
      document.body.classList.toggle("light-theme");

      // Initialize game when page loads
      window.addEventListener("load", initGame);
    </script>
  </body>
</html>
